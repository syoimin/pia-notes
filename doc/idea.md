# pia-notes 設計

## 概要
- ブラウザのみを使用した複数ブラウザ間同期処理を組み込んだピアノのノーツを使った音ゲー感覚練習システム

## 特徴

### 物理的特徴
- ブラウザだけ用意すれば動く
 - タブレットでも、スマホでもPCでも、ラズベリーパイでも
- ブラウザにリアルなピアノと同じ大きさの仮想ピアノ鍵盤を表示
  - ピアノの練習時にその鍵盤上にタブレットやディスプレイを置いて使用する
- 音ゲーのように練習したいピアノのノーツが上から流れてくる
- ユーザはその落ちてくるノーツを見ながらピアノの鍵盤を打鍵する
  - 仮想ピアノとリアルピアノを同じ大きさにすることで、ノーツが落ちてくる箇所をなぞって打鍵するだけでピアノが練習できる

### ソフトウェア的特徴
- ピアノのサイズに合わせられるように仮想ピアノ鍵盤の拡大縮小ができる
- リアル鍵盤と同じ大きさにする場合、ピアノ鍵盤長分のディスプレイを用意するのは不可能なため、練習したい曲が使う鍵盤の箇所にだけディスプレイを置くことで自由にディスプレイを配置して練習ができる。
  - ブラウザのみで動くため自分がすでに持っているタブレット、スマホ、古いスマホなどをかき集めれば必要最低限練習できるピアノ鍵盤の長さ分のディスプレイを用意するだけで練習できるのが訴求ポイント
- 各ブラウザで流れる仮想ピアノとノーツはすべて同じものが流れる
  - 自分が練習したい部分を拡大してリアルピアノの鍵盤上に配置するだけ
- 各ブラウザ間のノーツはすべて同期実行されるので、一部のブラウザだけズレて再生されることがない
- メイン端末がディスプレイ用のサブ端末を操作する
  - 操作内容は、再生・停止・5秒戻る・5秒進む・曲選択・MIDI読み込み
- ピアノのMIDIファイルからノーツが自動生成される
- 再生中の楽譜も表示されたらベスト
- 同期ズレをわかりやすくするための同期補助線を表示

## 設計
これらを実現するための技術的課題点は下記
- どうやって同期をさせるか
  - モニタのリフレッシュレート
  - ネットワークの遅延（WIFI環境など）
  - ビートの同期
  - ブラウザへの描画遅延

- MIDI から ノーツの作成技術


### 同期技術設計


### ノーツ表示設計

### ハードウェア・ネットワーク設計




## その他
- 応用として、マルチディスプレイを使ったデジタルサイネージにも使えるのでは？
- ローカル間での同期だが、ネットワークを跨げば Youtube の同時視聴にも使えそう